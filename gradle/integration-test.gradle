configurations {
    integrationTest.extendsFrom testRuntime
}
sourceSets {
    integrationTest {
        java.srcDir file('src/integration-test/java')
        resources.srcDir file('src/integration-test/resources')
        compileClasspath = sourceSets.main.output + configurations.integrationTest
        runtimeClasspath = output + compileClasspath
    }
}
task integrationTest(type: Test) {
    description  = 'Run integration tests'
    testClassesDir = sourceSets.integrationTest.output.classesDir
    classpath = sourceSets.integrationTest.runtimeClasspath
    reports.html.destination = file("$reports.html.destination/integration")
    minHeapSize = "256m"
    maxHeapSize = "512m"
    }

   check.dependsOn integrationTest